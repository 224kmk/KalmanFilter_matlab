# KalmanFilter_matlab
## Data_science

### KalmanFilter
 * MATLAB 활용 칼만필터의 이해 - 김성필 참고

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

+ AvgFilter(평균 필터) : 
    * 1. 재귀식을 사용하는 평균 필터는 직전의 평균값과 데이터의 개수만 알면 쉽게 평균을 구할 수 있음.
    * 2. 데이터가 순차적으로 입력되는 경우에는 데이터를 저장할 필요가 없고 계산 효율도 높음.
    * 3. 데이터를 실시간으로 처리해야 한다면 재귀식 형태의 필터가 필수적임
    * 4. 평균을 내면 잡음이 제거되는 효과도 있음.  

  <img src ="/Images/AvgFilter/AvgFilter_.png">
    - 측정 전압과 평균 필터의 출력값을 비교한 그래프임.
    - 측정 전압은 위 아래로 진동이 심하지만 평균 필터 출력은 추이가 안정되어 있음.
    - 데이터가 쌓여가면서 측정 잡음은 제거되고 차츰 원래의 평균 전압에 근접해감.

+ 평균 필터를 사용하게 되면 기존 물리적인 센서로 불러왔던 데이터들의 평균을 낼 수 있긴 하지만 동적으로 움직이게 하지는 못함.   
+ 그러므로 물리적인 센서의 평균은 낼 수는 있지만 실시간으로 업데이팅하는 것은 힘들 수 있음.



* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

+ MovAvgFilter(이동평균 필터) : 
    * 1. 주로 증권가에서 사용되며 매일매일 주가변동에 현혹되지 않고 중장기 추이를 확인하고 싶을 때 주로 사용되는 것이 이동평균 필터.
    * 2. 측정하려는 물리량이 시간에 따라 변하면 평균은 적절하지 못함 -> 평균은 데이터의 동적인 변화는 모두 없애고, 측정 데이터를 뭉뚱그려 하나의 값만 내놓기 때문임.
    * 3. 잡음을 없애는 동시에 시스템의 동적인 변화를 제대로 반영하는 방법 중 하나가 바로 이동평균(Moving Average)임
    * 4. 이동평균은 모든 측정 데이터가 아니라 지정된 개수의 최근 측정값만 가지고 계산한 평균이기에 새로운 데이터가 들어오면 가장 오래된 데이터는 버리는 방식으로 데이터의 개수를 일정하게 유지하면서 평균을 구함 --> 이름에 이동이라는 단어가 붙은것도 이 때문.

    <img src ="/Images/MovAvgFilter/MovAvgFilter_.png">
    - 측정 데이터의 잡음이 효과적으로 제거되고, 고도변화 추이도 잘 따라감.
    - 특히 6~8 사이의 측정값의 잡음이 심한데도 이동편균 출력이 비교적 안정되어있음. -> 잡음 제거 능력이 잘 발휘 됨.
    - 이동평균에 처리된 고도에 약간씩 시간지연이 존재함 -> 실제 고도 변화가 바로 반영되지 않고 조금씩 늦게 나타나기때문
    - 시간 지연이 너무 크게 되면 데이터의 개수를 줄여야하는데 그럼 측정 잡음을 제거하는 성능이 떨어지게 되고 데이터의 개수를 늘리면 잡음 제거 성능은 개선되지만 시간 지연은 커져서 데이터의 변화가 바로바로 반영되지 않음 -> 이동평균 필터를 설계할때는 데이터의 개수 선정을 잘 해야함.

+ 한계
    * 이동평균의 정의는 총합을 구하는 데이터의 개수는 항상 n개로 일정함. -> 새로운 데이터가 들어와도 평균을 내는데 드는 계산량이 증가하지 않음.
    * 평균과 달리 애초에 계산 부담이 크지않아 재귀식이 힘을 발휘할 예지가 별로 없음.
    * 이동평균을 계산하려면 직전 이동평균과 가장 오래된 데이터가 필요 -> 새로운 데이터가 추가되어 계산하게 되면 바로 처음 부분에 입력된 데이터가 가장 오래된 데이터가 됨.
    * 이렇게 새로 데이터가 추가되면 가장 오래된 데이터도 순차적으로 이동. -> 이동평균 필터를 구현하려면 최신데이터를 포함해 n개의 최근 데이터를 모두 보관하고 이씅면서 새로운 데이터가 입력될때마다 갱신해야함 -> 재귀식임에도 불구하고 메모리 저장 공간의 이점이 사라짐.
